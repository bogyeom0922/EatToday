<div id="reviews-new">
    <form>
        <div style="display: flex; align-items: center; margin-bottom: -20px">
            {{#user}}
                <input name = "uid"  type="hidden" value="{{uid}}" id="new-review-userid">
            {{/user}}
            <label style="font-size: 16px;">리뷰 작성</label>
            <textarea type="text" id="new-review-body" style="width: 60%; height: 30px;margin-left: 20px; margin-right: 10px"></textarea>

            {{#rest}}
                <input type="hidden" id="new-review-store-id" value="{{id}}">
            {{/rest}}
            <button type="button" id="review-create-btn" class="button">등록</button>
        </div>
    </form>
</div>

<script>
    {
        //리뷰 생성 버튼 변수화
        const reviewCreateBtn = document.querySelector("#review-create-btn");
        //리뷰 클릭 이벤트 감지
        reviewCreateBtn.addEventListener("click", function () {
            //새 리뷰 객체 생성
            const review = {
                //새 리뷰 유저아이디
                userid: document.querySelector("#new-review-userid").value,
                //새 리뷰 본문
                body: document.querySelector("#new-review-body").value,
                //부모 게시글 id
                storeid: document.querySelector("#new-review-store-id").value,
            };
            //리뷰 객체 출력
            console.log(review);
            //fetch() - 비동기 통신을 위한 API
            //fetch() - 비동기 통신을 위한 API
            const url = "/api/stores/" + review.storeid + "/reviews";
            fetch(url, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(review)
            }).then(response=>{
                window.location.reload();
            });
        });
    }
</script>